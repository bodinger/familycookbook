<%- actions({ 'Cancel' => url(:menuplanner, :index) }) %>

<%- form_for :menu, url(:menuplanner, :create), :method => :post, :class => 'form-horizontal' do |f| %>
  <%= render_partial 'menuplanner/form_fields', :object => f %>
  <%= f.submit 'Create', :class => 'btn btn-primary' %>
<% end %><script type="text/javascript">
    $(document).ready(
            function () {
                $(".recipe_typeahead_selector").select2({
                    placeholder: 'Select a recipe to add to this slot',
                    language: "de",
                    ajax: {
                        url: "/familycookbook/recipe/as_array",
                        dataType: 'json',
                        delay: 250,
                        data: function (params) {
                            return {
                                q: params.term, // search term
                                page: params.page
                            };
                        },
                        processResults: function (data, page) {
                            // parse the results into the format expected by Select2.
                            // since we are using custom formatting functions we do not need to
                            // alter the remote JSON data
                            return {
                                results: data
                            };
                        },
                        cache: true
                    },
                    escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
                    minimumInputLength: 1  //,
                    //templateResult: formatRepo, // omitted for brevity, see the source of this page
                    //templateSelection: formatRepoSelection // omitted for brevity, see the source of this page
                })
                DatePicker.prototype.initialize('daterangepicker-left', '<%= @range[:begin] %>');
                DatePicker.prototype.initialize('daterangepicker-right', '<%= @range[:end] %>');
                DatePicker.prototype.linkPickers('daterangepicker-left', 'daterangepicker-right');
            }
    );
</script>