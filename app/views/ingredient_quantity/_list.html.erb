<table class="table">
  <thead>
    <th><strong>Amount</strong></th>
    <th colspan="2"><strong>Ingredient</strong></th>
    <th><strong>Details</strong></th>
    <th class="text-right">&nbsp;</th>
  </thead>
  <tbody>

    <%- if route.path_for_generation.include? "edit" %>
      <%- unless ingredient_quantity %>
        <%= partial 'ingredient_quantity/edit_item', :locals => { :ingredient_quantity => nil } %>
      <% end %>
    <% end %>

    <% @recipe.ingredient_quantities.sort_by { |a| a.ingredients.first.title.downcase }.each do |ingredient_quantity| %>
        <%- if params[:ingredient_quantity_id].to_i == ingredient_quantity.id %>
            <%= partial 'ingredient_quantity/edit_item', :locals => { :ingredient_quantity => ingredient_quantity } %>
        <% else %>
      <tr>
        <td><%= ingredient_quantity.amount %> <%= ingredient_quantity.units.first.short_name %> </td>
        <td colspan="2"><%= ingredient_quantity.ingredients.first.title %> (Angabe f√ºr <%= ingredient_quantity.portions %> Pers.)</td>
        <td><%= ingredient_quantity.description %> </td>
        <td class="text-right">
        <%- if route.path_for_generation.include? "edit" %>
          <%= link_to 'Edit', url(:recipe, :edit_single, :id => @recipe.id, :ingredient_quantity_id => ingredient_quantity.id), :method => :get, :class => 'btn btn-primary btn-xs' %>
          <%= link_to 'Remove', url(:recipe, :remove_ingredient_quantity, :id => @recipe.id, :ingredient_quantity_id => ingredient_quantity.id), :method => :delete, :class => 'btn btn-danger btn-xs', :confirm => 'Do you really want to delete this ingredient from the recipe?' %>
        <% end %>
        </td>
      </tr>
        <% end %>
    <% end %>
  </tbody>
</table>