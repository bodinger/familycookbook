<%- actions({ 'Cancel' => url(:recipe, :show, :id => @recipe.id) }) %>

<%- form_for :recipe, url(:recipe, :update, :id => @recipe.id), :method => :put, :class => 'form-horizontal' do |f| %>
  <%= render_partial 'recipe/form_fields', :object => f %>
  <%= f.submit 'Update', :class => 'btn btn-primary' %>
<% end %>

<div class="page-header">
  <div class="page-title">Ingredients for <%= input_tag :amount_portions, :name => :amount_portions, :value => params[:amount_portions], :class => 'form-control' %> persons</div>
</div>

<% form_tag url(:recipe, :add_ingredient_and_amount, :id => @recipe.id), :method => :post, :class => 'form-inline' do %>
  <table class="table">
    <thead>
    <td>
      <strong>
        Amount
      </strong>
    </td>
    <td>
      <strong>
        Ingredient
      </strong>
    </td>
    </thead>
    <tbody>
    <tr>
      <td>
        <%= input_tag :amount, :name => :amount, :value => params[:amount], :class => 'form-control' %>
      </td>
      <td>
        <%= select_tag :ingredient_id, :options => ingredients_options, :include_blank => true, :selected => params[:ingredient_id], :class => 'form-control' %>
      </td>
      <td class="text-right">
        <%= submit_tag 'Add', :class => 'btn btn-success' %>
      </td>
    </tr>
    </tbody>
  </table>
<% end %>

<div class="ingredients-and-amounts">
  <% @recipe.ingredients.sort_by { |a| a.title.downcase }.each do |ingredient| %>
    <table class="table">
      <thead>
      <td><strong><%= ingredient.title %></strong></td>
      <td class="text-right">
        <%= link_to 'Remove ingredient', url(:recipe, :remove_ingredient, :id => @recipe.id, :ingredient_id => ingredient.id), :method => :delete, :class => 'btn btn-danger btn-xs', :confirm => 'Do you really want to delete this ingredient?' %>
      </td>
      </thead>
      <tbody>

      </tbody>
    </table>
  <% end %>
</div>

